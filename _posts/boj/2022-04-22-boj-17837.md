---
layout: single
title:  "[ë°±ì¤€] 17837ë²ˆ ìƒˆë¡œìš´ ê²Œì„2"
categories: BOJ
tags: [BFS, Gold]
toc: true
toc_sticky: true
author_profile: false
sidebar:
    nav: "docs"
search: false
---

<br>

# âœ”ï¸ Problem  : [ìƒˆë¡œìš´ ê²Œì„2](https://www.acmicpc.net/problem/17837)

<br>

<br>

![image-20220422031958358](../../images/boj/boj_image/image-20220422031958358.png)

-------

<br><br>

###### ğŸ’¡ í’€ì´ ê³¼ì •

**ì‹œë®¬ë ˆì´ì…˜**

ìµœëŒ€ 1000ë²ˆì˜ í„´ë™ì•ˆ ì£¼ì–´ì§„ ì¡°ê±´ì— ë”°ë¼ ì²´ìŠ¤ ë§ì´ ì›€ì§ì´ëŠ”ë°, ì´ë™ ì¹¸ì˜ ìƒ‰ê¹”(í° ì¹¸, íŒŒë€ ì¹¸, ë¹¨ê°„ ì¹¸)ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì²˜ë¦¬í•˜ê³  4ê°œ ì´ìƒì˜ ë§ì´ í•œ ì¹¸ì— ìŒ“ì˜€ì„  ë•Œ return í›„ turnì„ ì¶œë ¥í•˜ëŠ” ë¬¸ì œë‹¤

-------------

ì´ ë¬¸ì œë¥¼ í†µí•´ ë¶€ì¡±í•¨ì„ ë˜ ë‹¤ì‹œ í•œë²ˆ ëŠê¼ˆë‹¤. ì”ì‹¤ìˆ˜ê°€ ë„ˆë¬´ ë§ë‹¤.

ê³ ì • ê°’ìœ¼ë¡œ ë‘ê³  ì²˜ë¦¬í•´ì•¼í•˜ëŠ” ë¶€ë¶„ì„ ê³ ë ¤í•˜ì§€ ì•Šê³  cur.x, cur.y ê°’ì„ ë°”ë¡œ ì´ìš©í•˜ì—¬ ì¥ì‹œê°„ ê³ í†µ ë°›ì•˜ë‹¤.

ì¡°ê¸ˆ ë” ê¼¼ê¼¼í•˜ê³  ì„¬ì„¸í•˜ê²Œ!

<br>

----------------

**ë¬¸ì œ íë¦„**ì€ ë‹¤ìŒê³¼ ê°™ë‹¤

1. ì²´ìŠ¤ ì´ë™ì •ë³´ë¥¼ ì…ë ¥ ë°›ê¸°
2. í•œ í„´ì— ì²´ìŠ¤ ë§ë¶€í„° ë§ˆì§€ë§‰ ë§ê¹Œì§€ ì´ë™, ìµœëŒ€ 1000í„´ ì§„í–‰
2. ì´ë™í•  ì¹¸ì´ í° ì¹¸ì´ë©´ queue í˜•ì‹(ì •ìˆœ)ìœ¼ë¡œ ë§ ì´ë™, í° ì¹¸ì´ë©´ stack í˜•ì‹(ì—­ìˆœ)ìœ¼ë¡œ ì´ë™, íŒŒë€ ì¹¸& ë²”ìœ„ ë°– ì§€ì—­ì´ë©´ ë°©í–¥ ë³€ê²½
3. í„´ì„ ì§„í–‰í•œ í›„ ë§ì´ 4ê°œ ì´ìƒ ìŒ“ì´ëŠ” ì¹¸ì´ ë°œìƒí•˜ë©´ return í›„ ê²°ê³¼ ì¶œë ¥

```java
ans=-1;
while (turn++<=1000) {
	if(play()) {
		ans=turn;
		break;
	}
}
```

<br>

---------

##### â–ª ë§ ì´ë™

í•œ í„´ ë™ì•ˆ 1ë²ˆ ë§ë¶€í„° ëª¨ë“  ë§ ìˆœì„œëŒ€ë¡œ ì´ë™

ì—¬ê¸°ì„œ, cx, cy ë³€ìˆ˜ ì„ ì–¸í•˜ê³  ê³ ì •ì‹œí‚¬ ê°’ ë‹´ì•„ë‘ê¸°! <span style="color:red">(ìì£¼í•˜ëŠ” ì‹¤ìˆ˜)</span>

```java
for (int i = 1; i <= K; i++) {
	CO cur = horse[i];
	int cx=cur.x;
	int cy=cur.y;
	int size = map[cy][cx].size();
	int nx = cx + dx[cur.dir];
	int ny = cy + dy[cur.dir];
```

<br>

------

##### â–ª íŒŒë€ ì¹¸ & ë²”ìœ„ ë°–

íŒŒë€ ì¹¸ or ë²”ìœ„ ë°– ì˜ì—­ì— ëŒ€í•´ì„œ ë°©í–¥ì„ ë°”ê¿ˆ (2ë²ˆ ì´ìƒì´ë©´ stop)

```java
//íŒŒë€ ì¹¸(2) + ë²”ìœ„ ì™¸ ì§€ì—­
if (nx<=0||ny<=0||nx>N||ny>N ||color[ny][nx] == 2) {	
	cur.dir=change_dir(cur.dir);
	nx = cx + dx[cur.dir];
	ny = cy + dy[cur.dir];	
	if ((nx <= 0 || ny <= 0 || nx > N || ny > N) || color[ny][nx] == 2) continue;
}
```

<br>

-------------------

##### â–ª í° ì¹¸ & ë¹¨ê°„ ì¹¸

í° ì¹¸ :  í•´ë‹¹ ë˜ëŠ” ë§ì˜ ìˆœì„œë¥¼ ì°¾ì€ í›„ ê·¸ ìœ„ë¡œ ìŒ“ì¸ ë§ì„ ëª¨ë‘ ì´ë™ (queue )

ë¹¨ê°„ ì¹¸ : ê·¸ ìœ„ë¡œ ìŒ“ì¸ ë§ ìˆœì„œë¥¼ ë°˜ëŒ€ë¡œ ë°”ê¾¼ í›„ ëª¨ë‘ ì´ë™ (stack)

```java
//í°ìƒ‰+ë¹¨ê°„ìƒ‰ ì¹¸
//ìˆœì„œ ì°¾ê¸°(ëª‡ë²ˆì§¸ ìŒ“ì—¬ ìˆëŠ”ì§€)
int start = -1;
for (int j = 0; j < size; j++) {
	if (map[cur.y][cur.x].get(j) == i) {
			start = j;
	}
}
if(start==-1) continue;

//í°ìƒ‰ ì¹¸(0) (ì •ìˆœ)
if (color[ny][nx] == 0) {
	for (int j = start; j < size; j++) {
		map[ny][nx].add(map[cy][cx].get(j));
		horse[map[cy][cx].get(j)].x=nx;
		horse[map[cy][cx].get(j)].y=ny;
	}
}
//ë¹¨ê°„ ì¹¸(1) (ì—­ìˆœ)
if (color[ny][nx] == 1) {
	for (int j = size - 1; j >= start; j--) {
		map[ny][nx].add(map[cy][cx].get(j));
		horse[map[cy][cx].get(j)].x=nx;
		horse[map[cy][cx].get(j)].y=ny;
	}
}
//ì´ë™í•œ ë§ ì‚­ì œ
for (int j = start; j < size; j++) 
map[cy][cx].remove(start);
```

<br>

-------------------

##### â–ª return

í•œ ì¹¸ì— ë§ì´ 4ê°œ ì´ìƒ ìŒ“ì´ë©´ return í›„ ëª‡ ë²ˆì§¸ turnì¸ì§€ ì¶œë ¥í•œë‹¤

```java
//ë§ì´ 4ê°œì´ìƒ ìŒ“ì´ë©´ return
if(map[ny][nx].size()>=4) 
	return true;
```

<br>



----------

##### â–ª ë°©í–¥ ë°”ê¾¸ê¸°

switch ë¬¸ì„ í†µí•´ì„œ ë°©í–¥ ë°”ê¾¸ê¸°

```java
//ë°©í–¥ ë°”ê¾¸ê¸°
public static int change_dir(int dir) {
	switch(dir) {
		case 1: return 2;
		case 2: return 1;
		case 3: return 4;
		case 4: return 3;
	}
    return -1;
}
```

<br>

--------------------

##### â–ª ê²°ê³¼

![image-20220422032026250](../../images/boj/boj_image/image-20220422032026250.png)
<br><br>

###### ğŸ“ƒ ì½”ë“œ(java 8)

```java
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.StringTokenizer;

public class BOJ_17837_ìƒˆë¡œìš´ê²Œì„2 {
	static int N, K;
	static ArrayList<Integer> map[][];
	static int color[][];
	static CO[] horse;
	static int[] dx = { 0, 1, -1, 0, 0 };
	static int[] dy = { 0, 0, 0, -1, 1 };
	static int turn,ans;

	static class CO {
		int y, x, dir;
		public CO(int y, int x, int dir) {
			super();
			this.y = y;
			this.x = x;
			this.dir = dir;
		}
	}

	public static void main(String[] args) throws IOException {
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		StringTokenizer st = new StringTokenizer(br.readLine());
		N = Integer.parseInt(st.nextToken());
		K = Integer.parseInt(st.nextToken());
		
		//map ì´ˆê¸°í™”(ë§ ì €ì¥í•  ê³³)
		map = new ArrayList[N+1][N+1];
		for(int i=1;i<=N;i++) {
			for(int j=1;j<=N;j++)
				map[i][j] = new ArrayList<>();
		}

		//ìƒ‰ê¹” íŒ ì´ˆê¸°í™”
		color = new int[N + 1][N + 1];
		for (int i = 1; i <= N; i++) {
			st = new StringTokenizer(br.readLine());
			for (int j = 1; j <= N; j++)
				color[i][j] = Integer.parseInt(st.nextToken());
		}

		//ë§ ì €ì¥
		horse = new CO[K+1];
		for (int k = 1; k <= K; k++) {
			st = new StringTokenizer(br.readLine());
			int y = Integer.parseInt(st.nextToken());
			int x = Integer.parseInt(st.nextToken());
			int d = Integer.parseInt(st.nextToken());
			horse[k]=new CO(y, x, d);
			map[y][x].add(k);
		}
		
		
		ans=-1;
		while (turn++<=1000) {
			if(play()) {
				ans=turn;
				break;
			}
		}
		System.out.println(ans);		

	}

	static boolean play() {
		for (int i = 1; i <= K; i++) {
			CO cur = horse[i];
			int cx=cur.x;
			int cy=cur.y;
			int size = map[cy][cx].size();
			int nx = cx + dx[cur.dir];
			int ny = cy + dy[cur.dir];
			
			//íŒŒë€ ì¹¸(2) + ë²”ìœ„ ì™¸ ì§€ì—­
			if (nx<=0||ny<=0||nx>N||ny>N ||color[ny][nx] == 2) {	
				cur.dir=change_dir(cur.dir);
				nx = cx + dx[cur.dir];
				ny = cy + dy[cur.dir];	
				if ((nx <= 0 || ny <= 0 || nx > N || ny > N) || color[ny][nx] == 2) continue;
			}
			
			
			//í°ìƒ‰+ë¹¨ê°„ìƒ‰ ì¹¸
			//ìˆœì„œ ì°¾ê¸°(ëª‡ë²ˆì§¸ ìŒ“ì—¬ ìˆëŠ”ì§€)
			int start = -1;
			for (int j = 0; j < size; j++) {
				if (map[cur.y][cur.x].get(j) == i) {
					start = j;
				}
			}
			if(start==-1) continue;

			//í°ìƒ‰ ì¹¸(0) (ì •ìˆœ)
			if (color[ny][nx] == 0) {
				for (int j = start; j < size; j++) {
					map[ny][nx].add(map[cy][cx].get(j));
					horse[map[cy][cx].get(j)].x=nx;
					horse[map[cy][cx].get(j)].y=ny;
				}
			} 
			//ë¹¨ê°„ ì¹¸(1) (ì—­ìˆœ)
			if (color[ny][nx] == 1) {
				for (int j = size - 1; j >= start; j--) {
					map[ny][nx].add(map[cy][cx].get(j));
					horse[map[cy][cx].get(j)].x=nx;
					horse[map[cy][cx].get(j)].y=ny;
				}
			}
			
			//ì´ë™í•œ ë§ ì‚­ì œ
			for (int j = start; j < size; j++) 
				map[cy][cx].remove(start);
			
			//ë§ì´ 4ê°œì´ìƒ ìŒ“ì´ë©´ return
			if(map[ny][nx].size()>=4) 
				return true;
			
		}
		return false;
	}
	
	//ë°©í–¥ ë°”ê¾¸ê¸°
    public static int change_dir(int dir) {
        switch(dir) {
        	case 1: return 2;
        	case 2: return 1;
        	case 3: return 4;
        	case 4: return 3;
        }
        return -1;
    }

}

```

