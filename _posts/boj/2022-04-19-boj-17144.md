---
layout: single
title:  "[ë°±ì¤€] 17144ë²ˆ ë¯¸ì„¸ë¨¼ì§€ ì•ˆë…•"
categories: BOJ
tags: [BFS, Gold]
toc: true
toc_sticky: true
author_profile: false
sidebar:
    nav: "docs"
search: false
---

<br>

# âœ”ï¸ Problem  : [ë¯¸ì„¸ë¨¼ì§€ ì•ˆë…•](https://www.acmicpc.net/problem/17144)

<br><br>

-------

![image-20220422030945457](../../images/boj/boj_image/image-20220422030945457.png)

-----

<br>

<br>

###### ğŸ’¡ í’€ì´ ê³¼ì •

**ì‹œë®¬ë ˆì´ì…˜ + BFS**

ì‹¤í–‰ ìˆœì„œë¥¼ ì°¾ê³  ê·¸ì— ë§ê²Œ êµ¬í˜„í•´ì£¼ë©´ ë˜ëŠ” ë¬¸ì œì´ë‹¤

**<span style="color:#2d3748;background-color:#fff5b1">BFS</span>**ë¥¼ í™œìš©í•´ì„œ ë¯¸ì„¸ë¨¼ì§€ í™•ì‚°ì„ êµ¬í˜„í•˜ë©´ ì‰½ê²Œ í’€ë¦´ ë¬¸ì œì§€ë§Œ, í•œê°€ì§€ <span style="color:red">ì£¼ì˜í•  ì </span>ì´ ìˆë‹¤

ê°™ì€ ì‹œê°„ì— í™•ì‚°ëœ ë¯¸ì„¸ë¨¼ì§€ëŸ‰ì„ ê¸°ì¡´ ë¯¸ì„¸ë¨¼ì§€ëŸ‰ì— ë”í•œ í›„ <span style="color:red">ì¬í™•ì‚°í•˜ëŠ” ì‹¤ìˆ˜</span>ë¥¼ í•´ì„œëŠ” ì•ˆëœë‹¤

ë‚˜ëŠ” ì´ë¥¼ ê°„ê³¼í•˜ì—¬ ìˆ˜ë§ì€ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œì¼°ê³ , ëª‡ë²ˆì˜ ì‹œí–‰ì°©ì˜¤ ëì—  <span style="color:#2d3748;background-color:#fff5b1">2ì°¨ì› ë°°ì—´ **temp**ë¥¼ ì¶”ê°€ë¡œ ì„ ì–¸</span>í•´ì„œ

í™•ì‚°ë˜ëŠ” ë¯¸ì„¸ë¨¼ì§€ëŸ‰ì„ ì €ì¥ í›„ BFSê°€ ëë‚˜ë©´ ë”í•´ì£¼ëŠ” ë°©ë²•ìœ¼ë¡œ ë§ˆì¹¨ë‚´ ë¬¸ì œë¥¼ í’€ìˆ˜ ìˆì—ˆë‹¤

<br>

---------------

**ë¬¸ì œì˜ íë¦„**ì€ ë‹¤ìŒê³¼ ê°™ì•˜ë‹¤

1. ë¯¸ì„¸ë¨¼ì§€ ì°¾ê¸°
2. ë¯¸ì„¸ë¨¼ì§€ í™•ì‚°
3. ê³µê¸°ì²­ì •ê¸° í‹€ê¸°
3. Tì´ˆ ë™ì•ˆ 1,2,3ì„ ë°˜ë³µ  

```java
for(int t=1;t<=T;t++) {
	find_dust();
	spread();
	clean();
}
```

<br>

-----------------------

##### â–ª ë¯¸ì„¸ë¨¼ì§€ ì°¾ê¸°

ë¯¸ì„¸ë¨¼ì§€ë¥¼ ì°¾ì•„ì„œ **queue**ì— ì €ì¥í•œë‹¤

```java
//ë¯¸ì„¸ë¨¼ì§€ ì°¾ê¸°
static void find_dust() {
	dust= new LinkedList<>();
	for(int i=1;i<=R;i++) {
		for(int j=1;j<=C;j++) {
			if(room[i][j]>0)
				dust.offer(new CO(i,j));
		}
	}
}
```

<br>

-------------------

##### â–ª ë¯¸ì„¸ë¨¼ì§€ í™•ì‚°

BFSë¥¼ ì´ìš©í•˜ì—¬ 4ë°©ì— ë¯¸ì„¸ë¨¼ì§€ë¥¼ í™•ì‚°ì‹œí‚¨ë‹¤

**<span style="color:red">BFSí•˜ëŠ” ê³¼ì •ì—ì„œ ë¯¸ì„¸ë¨¼ì§€ëŸ‰ì„ ë”í•´ì£¼ë©´ ê°’ì´ ì„ì—¬ì„œ</span>** ì˜ë„í•œ ê²°ê³¼ê°€ ë‚˜ì˜¤ì§€ ì•Šê¸° ë•Œë¬¸ì—

temp ë°°ì—´ì— ë¶„ë°°ë˜ëŠ” ì„ì‹œ ë¯¸ì„¸ë¨¼ì§€ë¥¼ ë‹´ì•„ ë†“ê³  

BFSê°€ ë§ˆë¬´ë¦¬ ë˜ë©´ ê·¸ ê°’ì„ ë”í•´ì¤€ë‹¤

```java
static void spread() {
	int[][] temp= new int[R+1][C+1];
	
	while(!dust.isEmpty()) {
		CO cur = dust.poll();	
		if(room[cur.y][cur.x]<5) continue;
			
		int div_dust=room[cur.y][cur.x]/5;
		for(int d=0;d<4;d++) {
			int nx=cur.x+dx[d];
			int ny=cur.y+dy[d];
				
			if(nx<1||ny<1||nx>C||ny>R||room[ny][nx]==-1) continue;
			temp[ny][nx]+=div_dust;
			room[cur.y][cur.x]-=div_dust;
		}		
	}
		
	for(int i=1;i<=R;i++) {
		for(int j=1;j<=C;j++) 
			room[i][j]+=temp[i][j];
	}
}
```

<br>

-----------

##### â–ª ê³µê¸°ì²­ì •ê¸°

ìœ— ë¶€ë¶„ì€ ë°˜ì‹œê³„ ë°©í–¥, ì•„ë« ë¶€ë¶„ì€ ì‹œê³„ë°©í–¥ìœ¼ë¡œ ê³µê¸°ì²­ì •ê¸°ë¥¼ ê°€ë™í•œë‹¤

ë²”ìœ„ ì§€ì •í•  ë•Œ ì˜¤ë¥˜ê°€ ë§ì´ ë‚¬ë‹¤ <span style="color:red">ì§‘ì¤‘!</span>

```java
static void clean() {
		//1. ë°˜ì‹œê³„ (ìƒ)
		rotate_reverse(cleaner-1,1);
		//2. ì‹œê³„ (í•˜)
		rotate(cleaner,1);
	}
	
	static void rotate_reverse(int y,int x) {
		for(int i=y-2;i>=1;i--) 
			room[i+1][1]=room[i][1];
		
		for(int j=2;j<=C;j++) 
			room[1][j-1]=room[1][j];
		
		for(int i=1;i<=y;i++) 
			room[i-1][C]=room[i][C];
		
		for(int j=C;j>2;j--) 
			room[y][j]=room[y][j-1];
        
		room[y][2]=0;
	}

	static void rotate(int y,int x) {
		
		for(int i=y+2;i<=R;i++) 
			room[i-1][1]=room[i][1];
		
		for(int j=1;j<C;j++) 
			room[R][j]=room[R][j+1];
		
		for(int i=R;i>y;i--) 
			room[i][C]=room[i-1][C];
		
		for(int j=C;j>2;j--) 
			room[y][j]=room[y][j-1];
        
		room[y][2]=0;
	}
}
```

<br>

--------------------

##### â–ª ê²°ê³¼

![image-20220419021651908](../../images/boj/2022-04-19-boj/image-20220419021651908.png)
<br><br>

###### ğŸ“ƒ ì½”ë“œ(java 8)

```java
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.LinkedList;
import java.util.Queue;
import java.util.StringTokenizer;

public class Main {
	static int R,C,T;
	static int room[][];
	static int dx[]= {1,-1,0,0};
	static int dy[]= {0,0,1,-1};
	
	static int cleaner;
	static Queue<CO> dust;
	
	static class CO{
		int x,y;
		public CO(int y, int x) {
			super();
			this.x = x;
			this.y = y;
		}
	}	
	
	public static void main(String[] args) throws IOException {
		BufferedReader br= new BufferedReader(new InputStreamReader(System.in));
		StringTokenizer st = new StringTokenizer(br.readLine());
		
		R=Integer.parseInt(st.nextToken());
		C=Integer.parseInt(st.nextToken());
		T=Integer.parseInt(st.nextToken());		
		room = new int[R+1][C+1];

		for(int i=1;i<=R;i++) {
			st=new StringTokenizer(br.readLine());
			for(int j=1;j<=C;j++) {
				room[i][j]=Integer.parseInt(st.nextToken());
				if(room[i][j]==-1) 
					cleaner=i;
			}
		}
		
		for(int t=1;t<=T;t++) {
			find_dust();
			spread();
			clean();
		}
		
		int sum=2;
		for(int i=1;i<=R;i++) {
			for(int j=1;j<=C;j++) {
				sum+=room[i][j];
			}
		}
		System.out.println(sum);
	}
	
	//ë¯¸ì„¸ë¨¼ì§€ ì°¾ê¸°
	static void find_dust() {
		dust= new LinkedList<>();
		for(int i=1;i<=R;i++) {
			for(int j=1;j<=C;j++) {
				if(room[i][j]>0)
					dust.offer(new CO(i,j));
			}
		}
	}
	
	//í™•ì‚°
	static void spread() {
		int[][] temp= new int[R+1][C+1];
	
		while(!dust.isEmpty()) {
			CO cur = dust.poll();	
			if(room[cur.y][cur.x]<5) continue;
			
			int div_dust=room[cur.y][cur.x]/5;
			for(int d=0;d<4;d++) {
				int nx=cur.x+dx[d];
				int ny=cur.y+dy[d];
				
				if(nx<1||ny<1||nx>C||ny>R||room[ny][nx]==-1) continue;

				temp[ny][nx]+=div_dust;
				room[cur.y][cur.x]-=div_dust;
			}		
		}
		
		for(int i=1;i<=R;i++) {
			for(int j=1;j<=C;j++) 
				room[i][j]+=temp[i][j];
		}
	}
	
	//ê³µê¸°ì²­ì •ê¸° ê°€ë™ 
	static void clean() {
		//1. ë°˜ì‹œê³„ (ìƒ)
		rotate_reverse(cleaner-1,1);
		//2. ì‹œê³„ (í•˜)
		rotate(cleaner,1);
	}
	
	static void rotate_reverse(int y,int x) {
		for(int i=y-2;i>=1;i--) {
			room[i+1][1]=room[i][1];
		}
		
		for(int j=2;j<=C;j++) {
			room[1][j-1]=room[1][j];
		}
		
		for(int i=1;i<=y;i++) {
			room[i-1][C]=room[i][C];
		}
		
		for(int j=C;j>2;j--) {
			room[y][j]=room[y][j-1];
		}
		room[y][2]=0;
	}

	static void rotate(int y,int x) {
		
		for(int i=y+2;i<=R;i++) {
			room[i-1][1]=room[i][1];
		}
		
		for(int j=1;j<C;j++) {
			room[R][j]=room[R][j+1];
		}
		
		for(int i=R;i>y;i--) {
			room[i][C]=room[i-1][C];
		}
		
		for(int j=C;j>2;j--) {
			room[y][j]=room[y][j-1];
		}
		room[y][2]=0;
		
	}
}
```

