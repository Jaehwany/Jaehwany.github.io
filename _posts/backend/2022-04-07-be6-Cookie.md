---
layout: single
title:  "Web - Cookie"
categories: Web
tags: [Web]
toc: true
toc_sticky: true
author_profile: false
sidebar:
    nav: "docs"
search: false
order : 6
---

<br>

###### ğŸš¥ Cookie

- **ì‚¬ìš©ìì˜ ì»´í“¨í„°**ì— ì €ì¥ë˜ëŠ” **<span style="color:red">Key, Value</span>**ì´ ë“¤ì–´ ìˆëŠ” ì‘ì€ ë°ì´í„° íŒŒì¼
- Response Headerì— **Set-Cookie** ì†ì„±ì„ ì‚¬ìš©í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ì— ì¿ í‚¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤
- ì‚¬ìš©ìê°€ ë”°ë¡œ ìš”ì²­í•˜ì§€ ì•Šì•„ë„ ë¸Œë¼ìš°ì €ê°€ requestì‹œ Request Headerë¥¼ ë„£ì–´ì„œ ìë™ìœ¼ë¡œ ì„œë²„ì— ì „ì†¡
- ë¸Œë¼ìš°ì €ë§ˆë‹¤ ì €ì¥ë˜ëŠ” ì¿ í‚¤ëŠ” ë‹¤ë¥´ë‹¤ (ì„œë²„ì—ì„œëŠ” ë¸Œë¼ìš°ì €ê°€ ë‹¤ë¥´ë©´ ë‹¤ë¥¸ ì‚¬ìš©ìë¡œ ì¸ì‹)



<br>

<br>

###### ğŸš¥ Cookie  êµ¬ì„± ìš”ì†Œ

- **êµ¬ì„±**
  - **ì´ë¦„** (name) : ì¿ í‚¤ë¥¼ êµ¬ë³„í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì´ë¦„
  - **ê°’** (value): ì¿ í‚¤ì˜ ì´ë¦„ê³¼ ë§¤í•‘ë˜ëŠ” ê°’
  - **ìœ íš¨ê¸°ê°„** (expires): ì¿ í‚¤ì˜ ìœ íš¨ ê¸°ê°„
  - **ë„ë©”ì¸** (domain) : ì¿ í‚¤ë¥¼ ì „ì†¡í•  ë„ë©”ì¸
  - **ê²½ë¡œ** (path) : ì¿ í‚¤ë¥¼ ì „ì†¡í•  ìš”ì²­ ê²½ë¡œ
  
  ``` jsp
  Set-Cookie: name=value; expiers=date; path=path; domain=domain; secure
  ```
  
  


----------

- **í¬ê¸°**
  - clientì— ì´ **<span style="color:red">300</span>**ê°œì˜ ì¿ í‚¤ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤
  - í•˜ë‚˜ì˜ **ë„ë©”ì¸ë‹¹ <span style="color:red">20ê°œ</span>**ì˜ ì¿ í‚¤ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤
  - í•˜ë‚˜ì˜ ì¿ í‚¤ëŠ” <span style="color:red">**4KB**</span>ê¹Œì§€ ì €ì¥ ê°€ëŠ¥í•˜ë‹¤



<br><br>

###### ğŸš¥ Cookieì˜ ì‚¬ìš© ëª©ì 

- **ì„¸ì…˜ê´€ë¦¬** 
  - User ID, ì ‘ì† ì‹œê°„, ì¥ë°”êµ¬ë‹ˆ ë“± ì„œë²„ê°€ ì•Œì•„ì•¼ í•  ì •ë³´ ì €ì¥
  - ex) ID ì €ì¥ (ìë™ ë¡œê·¸ì¸), ì¼ì£¼ì¼ê°„ ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°, ì‡¼í•‘ëª° ì¥ë°”êµ¬ë‹ˆ ê¸°ëŠ¥
- **ê°œì¸í™”**
  - ì‚¬ìš©ìì— ë§ëŠ” Pageë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤
- **íŠ¸ë˜í‚¹**
  - ì‚¬ìš©ìì˜ í–‰ë™ê³¼ íŒ¨í„´ ë¶„ì„, ê¸°ë¡
  - ex) ìµœê·¼ ê²€ìƒ‰í•œ ìƒí’ˆ ê´‘ê³ ì— ì¶”ì²œ

-----------

<br>

<br>

###### ğŸš¥ Cookieì˜ ë™ì‘ ìˆœì„œ

![image-20220408010432052](../../images/db/2022-04-01-be/image-20220408010432052.png)

<br>

- Clientê°€ í˜ì´ì§€ë¥¼ <span style="color:#2d3748;background-color:#fff5b1">**Request**</span>

- WASì—ì„œ <span style="color:#2d3748;background-color:#fff5b1">**Cookie ìƒì„±**</span> & HTTP Headerì— Cookieë¥¼ ë„£ì–´ **<span style="color:#2d3748;background-color:#fff5b1">ì‘ë‹µ</span>**

- ë¸Œë¼ìš°ì €ëŠ” ë°›ì€ **Cookieë¥¼ <span style="color:#2d3748;background-color:#fff5b1">PC(local)ì— ì €ì¥</span>** 

- ê°™ì€ ìš”ì²­ì„ í•  ê²½ìš° HTTP í—¤ë”ì— ì¿ í‚¤ë¥¼ í•¨ê»˜ ë³´ëƒ„

- ë¸Œë¼ìš°ì €ê°€ ì¢…ë£Œë˜ì–´ë„ <span style="color:#2d3748;background-color:#fff5b1">**Cookie ë§Œë£Œ ê¸°ê°„ì´ ë‚¨ì•„ ìˆë‹¤ë©´ ClientëŠ” ê³„ì† ë³´ê´€**</span>

-  WASì—ì„œ Cookieë¥¼ ì½ì–´ ì´ì „ ìƒíƒœ ì •ë³´ë¥¼ ë³€ê²½ í•„ìš”ê°€ ìˆì„ ë•Œ ì—…ë°ì´íŠ¸í•œ Cookieë¥¼ HTTP í—¤ë”ì— í¬í•¨ì‹œì¼œ ì‘ë‹µ

<br>

<br>

###### ğŸš¥ Cookieì˜ ì£¼ìš” ê¸°ëŠ¥

------

- **Cookie ìƒì„±**

  ``` java
  Cookie cookie = new Cookie(String name, String value);
  
  //ê°’ ì„¤ì •
  cookie.setValue(String value);
  
  //ë„ë©”ì¸ ì§€ì •
  cookie.setDomain(String domain);
  
  //ê²½ë¡œ ì„¤ì •
  cookie.setPath(String path);
  
  //ìœ íš¨ê¸°ê°„ ì„¤ì •
  cookie.setMaxAge(int expiry);
  
  //ìƒì„±ëœ cookieë¥¼ clientì— ì „ì†¡
  response.addCookie(cookie);
  ```

----------

- **Cookie ì–»ê¸°**

  ```java
  //Clientì— ì €ì¥ëœ ëª¨ë“  Cookie ì–»ê¸°
  Cookie cookies[]= request.getCookies();
  
  //ê°’ ì–»ê¸°
  String value = cookie[i].getValue();
  
  //ë„ë©”ì¸ ì–»ê¸°
  String domain = cookie[i].getDomain();
  
  //ê²½ë¡œ ì–»ê¸°
  String path = cookie[i].getPath();
  
  //ìœ íš¨ê¸°ê°„ ì–»ê¸°
  int expiry = cookie[i].getMaxAge();
  ```

----------

- **ì›í•˜ëŠ” ì¿ í‚¤ ê²€ìƒ‰**

  ```java
  //ì›í•˜ëŠ” ì¿ í‚¤ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰
  String name = cookies[i].getName();
  if( name.equals(â€œidâ€) ) { â€¦ }
  ```

----------

- **ì¿ í‚¤ ì‚­ì œ**

  ```java
  //Cookie ì‚­ì œ
  cookie.setMaxAge(0);
  
  //ìˆ˜ì •ëœ cookieë¥¼ clientì— ì „ì†¡
  response.addCookie(cookie);
  ```

----------

